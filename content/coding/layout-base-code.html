---
layout: coding.njk
title: "layout base code"
description: "Neocities base code for layouts so that you don't have to update every single file for every change. For beginners!"
nesting: "../"
codeHighlight: true
mainClass: coding-page
progressBar: true
toc: true
tipType: "resource"
---

<section>
  <h1>Layout Base Code</h1>
  <i class="fa-solid fa-border-none"></i>
  <p>
    Tired of <a href="/coding/common-questions.html#layout">having to update all of you HTML files every time you update your layout</a>? Here's an easy solution. We'll be using JavaScript to load a
    header and footer on every page. We'll also take care of active links and relative paths.
  </p>

  <blockquote class="warning">Keep in mind that users who have deactivated JavaScript in their browser will not be able to navigate your site!</blockquote>
  <!--

  <blockquote class="contact">
    <p>
      If you have questions or feedback regarding the tutorial, please use the <a href="#comments">comment section</a> at the end of the page! Don't be shy; I know it's frustrating when you're stuck,
      and I'd love to help.
    </p>
  </blockquote>


  <blockquote class="warning">
    <p>Please note that due to the nested HTML generated by <b>sadgrl's layout maker</b> you can't use the code on this page as-is if you're using a layout generated with her layout maker!</p>
  </blockquote>
-->
  <blockquote class="tip">
    Alternatively to this you could also use a static site generator such as Eleventy (11ty). See <a href="/coding/eleventy-tutorial">my tutorial here</a>. It's much more difficult to set up but the
    result is better, and works for those who have deactivated JavaScript too!
  </blockquote>

  <div id="toc" data-two-levels="true">
    <b>Table of Contents:</b>
    <ul>
      <li>
        <a href="#what-it-will-do">What it will do</a>
        <ul></ul>
      </li>
      <li>
        <a href="#tutorial">Tutorial</a>
        <ol>
          <li><a href="#the-script">The Script</a></li>
          <li><a href="#loading-the-script">Loading the script</a></li>
          <li><a href="#insert-your-layout-code-in-the-javascript">Insert your layout code in the JavaScript</a></li>
          <li><a href="#prepare-your-pages">Prepare your pages</a></li>
          <li><a href="#style">Style</a></li>
        </ol>
      </li>
      <li>
        <a href="#comments">Comments</a>
        <ul></ul>
      </li>
    </ul>
  </div>

  <!-- ----------------------------------------------------------------------------------------------------- -->
  <!-- ----------------------------------------------------------------------------------------------------- -->
  <!-- ----------------------------------------------------------------------------------------------------- -->
</section>
<section>
  <h2>What it will do</h2>
  <p>Your header and footer HTML will be in a single JavaScript file, so you'll only need to update it once.</p>
  <hr />

  <div class="two-columns">
    <div>
      <p><b>HTML in your .html file:</b></p>
      <pre><code>&lt;body&gt;
  &lt;main&gt;
    your page here...
  &lt;/main&gt;
&lt;/body&gt;</code></pre>
      <p>(The header and footer code are not in the HTML files.)</p>
    </div>
    <div>
      <p><b>HTML rendered in the browser:</b></p>
      <pre><code>&lt;body&gt;
  &lt;header&gt;example...&lt;/header&gt;
  &lt;main&gt;
    your page here...
  &lt;/main&gt;
  &lt;footer&gt;example...&lt;/footer&gt;
&lt;/body&gt;</code></pre>
      <p>(The script automatically adds the header and footer.)</p>
    </div>
  </div>

  <hr />
  <p>You can see the code in action here (this is an iFrame of the <a href="/coding/base-code-example" target="_blank">example page</a>):</p>
  <iframe src="/coding/base-code-example" style="width: 100%; border: 1px solid currentColor; min-height: 342px" frameborder="0"></iframe>

  <hr />

  <p>You can even add elements inside of your wrapper element which contains your content, e.g. for a sidebar:</p>
  <div class="two-columns">
    <div>
      <p><b>HTML in your .html file:</b></p>
      <pre><code>&lt;body&gt;
  &lt;main&gt;
    &lt;p&gt;your page here...&lt;/p&gt;
  &lt;/main&gt;
&lt;/body&gt;</code></pre>
      <p>(The code for the other elements is in the JavaScript file as well.)</p>
    </div>
    <div>
      <p><b>HTML rendered in the browser:</b></p>
      <pre><code>&lt;body&gt;
  &lt;header&gt;example&lt;/header&gt;
  &lt;main&gt;
    &lt;div&gt;your sidebar here...&lt;/div&gt;
    &lt;p&gt;your page here...&lt;/p&gt;
    &lt;div&gt;your sidebar here...&lt;/div&gt;
  &lt;/main&gt;
  &lt;footer&gt;example&lt;/footer&gt;
&lt;/body&gt;</code></pre>
    </div>
  </div>

  <!-- ----------------------------------------------------------------------------------------------------- -->
  <!-- ----------------------------------------------------------------------------------------------------- -->
  <!-- ----------------------------------------------------------------------------------------------------- -->
</section>
<section>
  <h2>Tutorial</h2>
  <h3 data-step="1">The Script</h3>

  <p>Create a javascript file (e.g. <code>layout.js</code>) in the root of your project, and insert the following code:</p>

  <label style="display: block; text-align: right"><input type="checkbox" id="explanation-toggle" checked="true" /> Show explanatory comments</label>

  <pre id="hide-explanation" style="display: none">
<code>document.addEventListener("DOMContentLoaded", function () {
  if (document.body.classList.contains("no-layout")) return;
  document.body.insertAdjacentHTML("afterbegin", headerEl);
  document.body.insertAdjacentHTML("beforeend", footerEl);

  const wrapperEl = document.querySelector(".my-wrapper"); 
  if (wrapperEl) wrapperEl.insertAdjacentHTML("afterbegin", `&lt;b&gt;Element at beginning of wrapper element.&lt;/b&gt;`);
  if (wrapperEl) wrapperEl.insertAdjacentHTML("beforeend", `&lt;b&gt;Element at the end of wrapper element.&lt;/b&gt;`);

  initActiveLinks();
});

function initActiveLinks() {
  const pathname = window.location.pathname;
  [...document.querySelectorAll("a")].forEach((el) =&gt; {
    const elHref = el.getAttribute("href").replace(".html", "").replace("/public", "");

    if (pathname == "/") {
      if (elHref == "/" || elHref == "/index.html") el.classList.add("active");
    } else {
      if (window.location.href.includes(elHref)) el.classList.add("active");
    }
  });
}

function getNestingString() {
  const currentUrl = window.location.href.replace("http://", "").replace("https://", "").replace("/public/", "/");
  const numberOfSlahes = currentUrl.split("/").length - 1;
  if (numberOfSlahes == 1) return ".";
  if (numberOfSlahes == 2) return "..";
  return ".." + "/..".repeat(numberOfSlahes - 2);
}

const nesting = getNestingString();

// How to use the nesting variable: &lt;img src="${nesting}/images/example.jpg" /&gt;

const headerEl = `
	&lt;header&gt;Header...&lt;/header&gt;
	&lt;aside&gt;Sidebar...&lt;/aside&gt;
`;

const footerEl = `
	&lt;footer&gt;Footer...&lt;/footer&gt;
`;</code></pre>
  <!-- ---------------------------------------------- -->
  <!-- ---------------------------------------------- -->
  <pre id="show-explanation">
<code>// Everything in here is executed once the DOM (the HTML content of your website) has finished loading.
document.addEventListener("DOMContentLoaded", function () {
  // The layout will be loaded on all pages that do NOT have the "no-layout" class in the &lt;body&gt; element.
  if (document.body.classList.contains("no-layout")) return;

  // Inserting your header and footer:
  document.body.insertAdjacentHTML("afterbegin", headerEl);
  document.body.insertAdjacentHTML("beforeend", footerEl);

  // To insert something inside another element, e.g. for sidebars:
  const wrapperEl = document.querySelector(".my-wrapper"); // &lt;- your selector here
  if (wrapperEl) wrapperEl.insertAdjacentHTML("afterbegin", `&lt;b&gt;Element at beginning of wrapper element.&lt;/b&gt;`);
  if (wrapperEl) wrapperEl.insertAdjacentHTML("beforeend", `&lt;b&gt;Element at the end of wrapper element.&lt;/b&gt;`);

  // Give class 'active' to links to the current page:
  initActiveLinks();

  // add your own JavaScript code here...
});

/* ********************************* */

/**
 *  F U N C T I O N S
 */

function initActiveLinks() {
  // This function adds the class "active" to any link that links to the current page.
  // This is helpful for styling the active menu item.

  const pathname = window.location.pathname;
  [...document.querySelectorAll("a")].forEach((el) =&gt; {
    const elHref = el.getAttribute("href").replace(".html", "").replace("/public", "");

    if (pathname == "/") {
      // homepage
      if (elHref == "/" || elHref == "/index.html") el.classList.add("active");
    } else {
      // other pages
      if (window.location.href.includes(elHref)) el.classList.add("active");
    }
  });
}

function getNestingString() {
  // This function prepares the "nesting" variable for your header and footer (see below).
  // Only change this function if you know what you're doing.
  const currentUrl = window.location.href.replace("http://", "").replace("https://", "").replace("/public/", "/");
  const numberOfSlahes = currentUrl.split("/").length - 1;
  if (numberOfSlahes == 1) return ".";
  if (numberOfSlahes == 2) return "..";
  return ".." + "/..".repeat(numberOfSlahes - 2);
}

/* ********************************* */

/**
 *  H T M L
 */

const nesting = getNestingString();

/**
  Use ${nesting} to output a . or .. or ../.. etc according to the current page's folder depth.
  Example:
    &lt;img src="${nesting}/images/example.jpg" /&gt;
  will output
    &lt;img src="./images/example.jpg" /&gt; on a page that isn't in any folder.
    &lt;img src="../images/example.jpg" /&gt; on a page that is in a folder.
    &lt;img src="../../images/example.jpg" /&gt; on a page that is in a sub-folder.
    etc.
 */

// Insert your header HTML inside these ``. You can use HTML as usual. 
// You don't need to use the &lt;header&gt; element, but I recommend it.
const headerEl = `
	&lt;header&gt;Header...&lt;/header&gt;
	&lt;aside&gt;Sidebar...&lt;/aside&gt;
`;

// Insert your footer HTML inside these ``. You can use HTML as usual. 
// You don't need to use the &lt;footer&gt; element, but I recommend it.
const footerEl = `
	&lt;footer&gt;Footer...&lt;/footer&gt;
`;</code></pre>

  <!-- ----------------------------------------------------------------------------------------------------- -->

  <h3 data-step="2">Loading the script</h3>
  <p>Load that javascript file on every page.</p>

  <ul>
    <li>For your index file, or any other page that is not in a folder: <code>&lt;script src="layout.js"&gt;&lt;/script&gt;</code></li>
    <li>For any file that is in a folder: <code>&lt;script src="../layout.js"&gt;&lt;/script&gt;</code></li>
    <li>For files that are in a subfolder use <code>&lt;script src="../../layout.js"&gt;&lt;/script&gt;</code> , and so on. (add another ../ for every subfolder)</li>
  </ul>
  <p>(This line should be inserted into the head of your HTML file (= inbetween &lt;head&gt; and &lt;/head&gt;).)</p>

  <!-- ----------------------------------------------------------------------------------------------------- -->

  <h3 data-step="3">Insert your layout code in the JavaScript</h3>
  <p>In the javascript file, paste your header and footer inbetween the ticks (``) of the variables <i>headerEl</i> and <i>footerEl</i>.</p>

  <h4>Sidebars</h4>

  <p>If you have a <b>sidebar</b>, you have three options. Choose the best depending on how your original layout was structured:</p>
  <ul>
    <li>Include it inside of your header element</li>
    <li>or: Add it after the header element (but still in the <i>headerEl</i> variable) like shown in the code above.</li>
    <li>or: Use the <i>wrapperEl</i> variable (make sure to adjust the CSS selector!) to get your element in the HTML file and add additional elements inside it.</li>
  </ul>

  <h4>Images</h4>
  <p>
    Use <code>${nesting}</code> to output <code>.</code> or <code>..</code> or <code>../..</code> etc according to the current page's folder depth. This is helpful when you want to use relative paths
    to images. For Example:
  </p>
  <pre><code>const headerEl = `&lt;img src="${nesting}/images/example.jpg" /&gt;`;</code></pre>
  <p>... will output:</p>
  <ul>
    <li><code>&lt;img src="./images/example.jpg" /&gt;</code> on a page that isn't in any folder</li>
    <li><code>&lt;img src="../images/example.jpg" /&gt;</code> on a page that is in a folder</li>
    <li><code>&lt;img src="../../images/example.jpg" /&gt;</code> on a page that is in a sub-folder.</li>
    <li>etc.</li>
  </ul>

  <!-- ----------------------------------------------------------------------------------------------------- -->

  <h3 data-step="4">Prepare your pages</h3>
  <p>
    Remove your header and footer from the html files of your pages - They will be added via JavaScript. Make sure all page content is in a wrapper, I suggest using
    <code>&lt;main&gt;</code> or <code>&lt;div&gt;</code>:
  </p>
  <pre><code>&lt;body&gt;
  &lt;main&gt;
    your page here...
  &lt;/main&gt;
&lt;/body&gt;</code></pre>

  <p>If you have page on which your layout should not be loaded, give the <code>&lt;body&gt;</code> element the "no-layout" class.</p>

  <!-- ----------------------------------------------------------------------------------------------------- -->

  <h3 data-step="5">Style</h3>
  <p>You don't need to make any changes in the CSS.</p>
  <p>
    <b>Tip: </b>My code adds the class "active" to any links that are linked to the current page. This makes it easy to style active menu links. Just make a CSS rule that checks for the "active"
    class, e.g. <code>.active { font-weight:bold; }</code>
  </p>

  <!-- ----------------------------------------------------------------------------------------------------- -->
  <br />
  <blockquote class="success">
    <p><strong>And that's it!</strong></p>
  </blockquote>
</section>

<!-- ----------------------------------------------------------------------------------------------------- -->

{% include 'tip-me.njk' %}

<section>
  <h2>Comments</h2>
  <p><b>Leave your questions, problems, suggestions, requests and thanks here!</b></p>
  <p>
    To share very long code or error messages with me, please upload it to <a href="https://pastebin.com/" target="_blank">pastebin</a> (or a similar site) and include the link. This is to make sure
    you don't hit the max character limit on comments.
  </p>
  <div id="c_widget">Comment Widget could not be loaded!</div>
  <script src="{{ nesting }}assets/js/comment-widget.js"></script>
</section>
