<!doctype html><html lang="en"><head><title>layout base code | petrapixel</title><meta name="description" content="Neocities base code for layouts so that you don&#39;t have to update every single file for every change. For beginners!"><script src="../assets/js/main.js?nocache=1766391878850"></script><link rel="stylesheet" href="../assets/main.css?nocache=1766391878850"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link href="../assets/img/favicon.ico" rel="icon" type="image/x-icon"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script><script>hljs.highlightAll()</script><script src="https://kit.fontawesome.com/0328336a9e.js" crossorigin="anonymous"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-J64TL8KVTJ"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-J64TL8KVTJ")</script></head><body class="coding-page-layout"><noscript id="no-js-warning">Please enable JavaScript to to be able to use all functions of this website!</noscript><a href="#main" id="skip-to-content-link">Skip to content</a> <a href="/sitemap" id="skip-to-content-link2">Go to Sitemap</a><div id="content"><div id="theme-toggler" aria-hidden="true"><button type="button"><img src="../assets/img/layout/moon.gif" width="20" style="height:20px;image-rendering:pixelated" alt=""> <span>toggle theme</span></button></div><div id="font-toggler" aria-hidden="true"><button type="button"><span>toggle font</span></button></div><header><div class="header-heading"><a href="/"><img src="../assets/img/layout/petrapixel-coding.png" aria-label="petrapixel" height="100" width="300"></a></div></header><nav class="coding-navigation" data-nosnippet="true"><div class="coding-navigation-category" aria-label="Tools"><div class="coding-navigation-category__title">Tools</div><ul><li><a href="/coding/layout-generator"><i class="ri-layout-line"></i><span>Layout Generator</span></a></li><li><a href="/coding/widgets"><i class="ri-bard-line"></i><span>Widgets for free Neocities accounts</span></a></li><li><a href="/coding/cheatsheet"><i class="ri-file-text-line"></i><span>Cheatsheet</span></a></li><li><a href="/coding/bookmarks"><i class="ri-bookmark-line"></i><span>Helpful Sites</span></a></li><li><a href="/coding/checklist"><i class="ri-list-check-3"></i><span>Self-study Checklist</span></a></li><li><a href="/coding/quizzes"><i class="ri-lightbulb-line"></i><span>Coding Quizzes</span></a></li><li><a href="/coding/webringu"><i class="ri-user-community-line"></i><span>Webringu<small>Simple Webring Script</small></span></a></li></ul></div><div class="coding-navigation-category" aria-label="First Steps"><div class="coding-navigation-category__title">First Steps</div><ul><li><a href="/coding/how-to-make-a-website"><i class="ri-pages-line"></i><span>How to create your first website</span></a></li><li><a href="/coding/common-questions"><i class="ri-questionnaire-line"></i><span>Common Questions</span></a></li><li><a href="/coding/common-mistakes"><i class="ri-error-warning-line"></i><span>Common Mistakes</span></a></li><li><a href="/coding/code-quality"><i class="ri-code-ai-line"></i><span>Code Quality Guide</span></a></li><li><a href="/coding/need-help"><i class="ri-bug-line"></i><span>Troubleshooting Guide<small>+ how to find support</small></span></a></li></ul></div><div class="coding-navigation-category" aria-label="Beginner Tutorials"><div class="coding-navigation-category__title">Beginner Tutorials</div><ul><li><a href="/coding/layout-base-code"><i class="ri-layout-5-line"></i><span>How to load the same layout on every page</span></a></li><li><a href="/coding/positioning-tutorial"><i class="ri-layout-masonry-line"></i><span>CSS Positioning/Layout Tutorial<small>(display, position, flexbox, grid, transform, z-index, ...)</small></span></a></li><li><a href="/coding/cachebusting"><i class="ri-delete-bin-6-line"></i><span>Cachebusting<small>Stop that pesky caching</small></span></a></li></ul></div><div class="coding-navigation-category" aria-label="Advanced Tutorials"><div class="coding-navigation-category__title">Advanced Tutorials</div><ul><li><a href="/coding/git-tutorial"><i class="ri-github-line"></i><span>Git Tutorial<small>Version Control</small></span></a></li><li><a href="/coding/npm-tutorial"><i class="ri-npmjs-line"></i><span>node/npm tutorial<small>Package Manager</small></span></a></li><li><a href="/coding/webpack-tutorial"><i class="ri-box-3-line"></i><span>Webpack Tutorial<small>File Bundler</small></span></a></li><li><a href="/coding/eleventy-tutorial"><i class="ri-magic-line"></i><span>Eleventy (11ty) Tutorial<small>Static Site Generator</small></span></a></li><li><a href="/coding/google-sheets-api-tutorial"><i class="ri-drive-line"></i><span>Google Sheets API Tutorial<small>Read sheets data with JS</small></span></a></li></ul></div><div class="coding-navigation-category" aria-label="Miscellaneous"><div class="coding-navigation-category__title">Miscellaneous</div><ul><li><a href="/coding/neocities"><i class="ri-building-line"></i><span>Neocities Tips</span></a></li><li><a href="/coding/snippets"><i class="ri-code-s-slash-line"></i><span>Code Snippets</span></a></li><li><a href="/coding/my-setup"><i class="ri-tools-line"></i><span>My VSCode Setup<small>Settings + Extensions</small></span></a></li><li><a href="/coding/now-what"><i class="ri-rocket-line"></i><span>I know HTML, CSS, and JS. Now what?</span></a></li><li><a href="/coding/cliques"><i class="ri-user-community-line"></i><span>List of Cliques</span></a></li></ul></div></nav><aside class="aside aside--left" data-nosnippet="true"><div class="coding-back-to-home"><a href="/"><span><span>⇠</span> home</span> <img src="../assets/img/layout/pc.gif" alt="" aria-hidden="true"></a></div><img src="../assets/img/layout/divider4.gif" alt="" aria-hidden="true"><div class="aside-stuff aside-clap-kirby" style="margin-top:20px"><a class="aside-stuff__guestbook" aria-hidden="true" href="/about/guestbook"><img width="145" height="56" src="../assets/img/layout/kirby1light.png" alt="sign my guestbook" class="only-show-in-light-mode"> <img width="145" height="56" src="../assets/img/layout/kirby1.png" alt="sign my guestbook" class="only-show-in-dark-mode"> </a><a class="aside-stuff__guestbook" aria-label="follow me on neocities" href="https://neocities.org/site/petrapixel" target="_blank"><img width="145" height="56" src="../assets/img/layout/kirby2light.png" alt="follow me on neocities" class="only-show-in-light-mode"> <img width="145" height="56" src="../assets/img/layout/kirby2.png" alt="follow me on neocities" class="only-show-in-dark-mode"> </a><a id="clap-for-me" href="//clap.fc2.com/post/petrapixel/?url=https%3A%2F%2Fpetrapixel.neocities.org%2F&title=petrapixel" target="_blank"><img width="80" height="18" src="//clap.fc2.com/images/button/pink/petrapixel?url=https%3A%2F%2Fpetrapixel.neocities.org%2F&amp;lang=en" alt="clap for me on clap.fc2.com"> <small>click to clap for me!</small></a></div><div class="aside-stuff aside-link-back"><div class="aside-stuff__heading">Link back!<img src="../assets/img/layout/icon-copy.png" alt="" aria-hidden="true"></div><p>Hotlinking is a-okay!</p><a href="https://petrapixel.neocities.org/" target="_blank" tabindex="-1"><img src="https://cdn.jsdelivr.net/gh/petracoding/petrapixel.neocities.org@latest/public/assets/img/linkback.webp" alt="petrapixel" width="88" height="31"></a><textarea class="code-textarea" name="" id="" rows="10" aria-label="link-back code">
<a href="https://petrapixel.neocities.org/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/petracoding/petrapixel.neocities.org@latest/public/assets/img/linkback.gif" alt="petrapixel"></a></textarea></div><div class="aside-stats__stat" style="margin-bottom:0;margin-top:2em"><div class="aside-stuff__heading"><span>hits & visitors</span><img src="../assets/img/layout/icon-stats.png" alt="" aria-hidden="true"></div><div class="aside-stats__stat-content"><center><script type="text/javascript" src="https://counter.websiteout.com/js/30/0/128970/0"></script></center><small style="font-size:.8em;letter-spacing:-.4px;text-align:center;display:block">(might not be entirely accurate)</small></div><div id="current-visitors"><a href="http://www.snazzyspace.com/generators/viewer-counter/" target="_blank"><img src="http://www.snazzyspace.com/generators/viewer-counter/counter.php/fid=1740397249/style=4/counter.png"></a></div></div><img src="../assets/img/layout/divider6.gif" alt="" aria-hidden="true" style="margin-top:-5px"> <img src="../assets/img/layout/divider8.gif" alt="" aria-hidden="true" style="margin-top:2em"><div id="toc-position"></div><div id="toc"></div><a class="aside-tip-jar" href="https://ko-fi.com/petrastipjar" target="_blank"><img src="../assets/img/layout/coffee.gif" width="70"><div><b>Tip Jar</b><small>Buy me a coffee? :3</small></div></a><img src="../assets/img/layout/divider2.gif" alt="" aria-hidden="true" style="image-rendering:pixelated"> <a class="aside-contest" href="/contest"><img src="../assets/img/layout/trophy.gif" width="80" height="85" alt="Trophy"><div><b>Indie Web Contest</b><small>Vote now!</small></div></a></aside><div class="progress-bar-container"><div>You're <span class="progress-bar-percent">0</span>% done reading!</div><div class="progress-bar-wrapper"><div class="progress-bar"></div></div></div><div id="back-to-top-link" aria-hidden="true"><a href="#" tabindex="-1">scroll to top</a></div><main id="main" class="coding-page"><section><h1>Layout Base Code</h1><i class="fa-solid fa-border-none"></i><p>Tired of <a href="/coding/common-questions.html#layout">having to update all of you HTML files every time you update your layout</a>? Here's an easy solution. We'll be using JavaScript to load a header and footer on every page. We'll also take care of active links and relative paths.</p><blockquote class="warning">Keep in mind that users who have deactivated JavaScript in their browser will not be able to navigate your site!</blockquote><blockquote class="tip">Alternatively to this you could also use a static site generator such as Eleventy (11ty). See <a href="/coding/eleventy-tutorial">my tutorial here</a>. It's much more difficult to set up but the result is better, and works for those who have deactivated JavaScript too!</blockquote><div id="toc" data-two-levels="true"><b>Table of Contents:</b><ul><li><a href="#what-it-will-do">What it will do</a><ul></ul></li><li><a href="#tutorial">Tutorial</a><ol><li><a href="#the-script">The Script</a></li><li><a href="#loading-the-script">Loading the script</a></li><li><a href="#insert-your-layout-code-in-the-javascript">Insert your layout code in the JavaScript</a></li><li><a href="#prepare-your-pages">Prepare your pages</a></li><li><a href="#style">Style</a></li></ol></li><li><a href="#comments">Comments</a><ul></ul></li></ul></div></section><section><h2>What it will do</h2><p>Your header and footer HTML will be in a single JavaScript file, so you'll only need to update it once.</p><hr><div class="two-columns"><div><p><b>HTML in your .html file:</b></p><pre><code>&lt;body&gt;
  &lt;main&gt;
    your page here...
  &lt;/main&gt;
&lt;/body&gt;</code></pre><p>(The header and footer code are not in the HTML files.)</p></div><div><p><b>HTML rendered in the browser:</b></p><pre><code>&lt;body&gt;
  &lt;header&gt;example...&lt;/header&gt;
  &lt;main&gt;
    your page here...
  &lt;/main&gt;
  &lt;footer&gt;example...&lt;/footer&gt;
&lt;/body&gt;</code></pre><p>(The script automatically adds the header and footer.)</p></div></div><hr><p>You can see the code in action here (this is an iFrame of the <a href="/coding/base-code-example" target="_blank">example page</a>):</p><iframe src="/coding/base-code-example" style="width:100%;border:1px solid currentColor;min-height:342px" frameborder="0"></iframe><hr><p>You can even add elements inside of your wrapper element which contains your content, e.g. for a sidebar:</p><div class="two-columns"><div><p><b>HTML in your .html file:</b></p><pre><code>&lt;body&gt;
  &lt;main&gt;
    &lt;p&gt;your page here...&lt;/p&gt;
  &lt;/main&gt;
&lt;/body&gt;</code></pre><p>(The code for the other elements is in the JavaScript file as well.)</p></div><div><p><b>HTML rendered in the browser:</b></p><pre><code>&lt;body&gt;
  &lt;header&gt;example&lt;/header&gt;
  &lt;main&gt;
    &lt;div&gt;your sidebar here...&lt;/div&gt;
    &lt;p&gt;your page here...&lt;/p&gt;
    &lt;div&gt;your sidebar here...&lt;/div&gt;
  &lt;/main&gt;
  &lt;footer&gt;example&lt;/footer&gt;
&lt;/body&gt;</code></pre></div></div></section><section><h2>Tutorial</h2><h3 data-step="1">The Script</h3><p>Create a javascript file (e.g. <code>layout.js</code>) in the root of your project, and insert the following code:</p><label style="display:block;text-align:right"><input type="checkbox" id="explanation-toggle" checked="true"> Show explanatory comments</label><pre id="hide-explanation" style="display:none">
<code>document.addEventListener("DOMContentLoaded", function () {
  if (document.body.classList.contains("no-layout")) return;
  document.body.insertAdjacentHTML("afterbegin", headerEl);
  document.body.insertAdjacentHTML("beforeend", footerEl);

  const wrapperEl = document.querySelector(".my-wrapper"); 
  if (wrapperEl) wrapperEl.insertAdjacentHTML("afterbegin", `&lt;b&gt;Element at beginning of wrapper element.&lt;/b&gt;`);
  if (wrapperEl) wrapperEl.insertAdjacentHTML("beforeend", `&lt;b&gt;Element at the end of wrapper element.&lt;/b&gt;`);

  initActiveLinks();
});

function initActiveLinks() {
  const pathname = window.location.pathname;
  [...document.querySelectorAll("a")].forEach((el) =&gt; {
    const elHref = el.getAttribute("href").replace(".html", "").replace("/public", "");

    if (pathname == "/") {
      if (elHref == "/" || elHref == "/index.html") el.classList.add("active");
    } else {
      if (window.location.href.includes(elHref)) el.classList.add("active");
    }
  });
}

function getNestingString() {
  const currentUrl = window.location.href.replace("http://", "").replace("https://", "").replace("/public/", "/");
  const numberOfSlahes = currentUrl.split("/").length - 1;
  if (numberOfSlahes == 1) return ".";
  if (numberOfSlahes == 2) return "..";
  return ".." + "/..".repeat(numberOfSlahes - 2);
}

const nesting = getNestingString();

// How to use the nesting variable: &lt;img src="${nesting}/images/example.jpg" /&gt;

const headerEl = `
	&lt;header&gt;Header...&lt;/header&gt;
	&lt;aside&gt;Sidebar...&lt;/aside&gt;
`;

const footerEl = `
	&lt;footer&gt;Footer...&lt;/footer&gt;
`;</code></pre><pre id="show-explanation">
<code>// Everything in here is executed once the DOM (the HTML content of your website) has finished loading.
document.addEventListener("DOMContentLoaded", function () {
  // The layout will be loaded on all pages that do NOT have the "no-layout" class in the &lt;body&gt; element.
  if (document.body.classList.contains("no-layout")) return;

  // Inserting your header and footer:
  document.body.insertAdjacentHTML("afterbegin", headerEl);
  document.body.insertAdjacentHTML("beforeend", footerEl);

  // To insert something inside another element, e.g. for sidebars:
  const wrapperEl = document.querySelector(".my-wrapper"); // &lt;- your selector here
  if (wrapperEl) wrapperEl.insertAdjacentHTML("afterbegin", `&lt;b&gt;Element at beginning of wrapper element.&lt;/b&gt;`);
  if (wrapperEl) wrapperEl.insertAdjacentHTML("beforeend", `&lt;b&gt;Element at the end of wrapper element.&lt;/b&gt;`);

  // Give class 'active' to links to the current page:
  initActiveLinks();

  // add your own JavaScript code here...
});

/* ********************************* */

/**
 *  F U N C T I O N S
 */

function initActiveLinks() {
  // This function adds the class "active" to any link that links to the current page.
  // This is helpful for styling the active menu item.

  const pathname = window.location.pathname;
  [...document.querySelectorAll("a")].forEach((el) =&gt; {
    const elHref = el.getAttribute("href").replace(".html", "").replace("/public", "");

    if (pathname == "/") {
      // homepage
      if (elHref == "/" || elHref == "/index.html") el.classList.add("active");
    } else {
      // other pages
      if (window.location.href.includes(elHref)) el.classList.add("active");
    }
  });
}

function getNestingString() {
  // This function prepares the "nesting" variable for your header and footer (see below).
  // Only change this function if you know what you're doing.
  const currentUrl = window.location.href.replace("http://", "").replace("https://", "").replace("/public/", "/");
  const numberOfSlahes = currentUrl.split("/").length - 1;
  if (numberOfSlahes == 1) return ".";
  if (numberOfSlahes == 2) return "..";
  return ".." + "/..".repeat(numberOfSlahes - 2);
}

/* ********************************* */

/**
 *  H T M L
 */

const nesting = getNestingString();

/**
  Use ${nesting} to output a . or .. or ../.. etc according to the current page's folder depth.
  Example:
    &lt;img src="${nesting}/images/example.jpg" /&gt;
  will output
    &lt;img src="./images/example.jpg" /&gt; on a page that isn't in any folder.
    &lt;img src="../images/example.jpg" /&gt; on a page that is in a folder.
    &lt;img src="../../images/example.jpg" /&gt; on a page that is in a sub-folder.
    etc.
 */

// Insert your header HTML inside these ``. You can use HTML as usual. 
// You don't need to use the &lt;header&gt; element, but I recommend it.
const headerEl = `
	&lt;header&gt;Header...&lt;/header&gt;
	&lt;aside&gt;Sidebar...&lt;/aside&gt;
`;

// Insert your footer HTML inside these ``. You can use HTML as usual. 
// You don't need to use the &lt;footer&gt; element, but I recommend it.
const footerEl = `
	&lt;footer&gt;Footer...&lt;/footer&gt;
`;</code></pre><h3 data-step="2">Loading the script</h3><p>Load that javascript file on every page.</p><ul><li>For your index file, or any other page that is not in a folder: <code>&lt;script src="layout.js"&gt;&lt;/script&gt;</code></li><li>For any file that is in a folder: <code>&lt;script src="../layout.js"&gt;&lt;/script&gt;</code></li><li>For files that are in a subfolder use <code>&lt;script src="../../layout.js"&gt;&lt;/script&gt;</code> , and so on. (add another ../ for every subfolder)</li></ul><p>(This line should be inserted into the head of your HTML file (= inbetween &lt;head&gt; and &lt;/head&gt;).)</p><h3 data-step="3">Insert your layout code in the JavaScript</h3><p>In the javascript file, paste your header and footer inbetween the ticks (``) of the variables <i>headerEl</i> and <i>footerEl</i>.</p><h4>Sidebars</h4><p>If you have a <b>sidebar</b>, you have three options. Choose the best depending on how your original layout was structured:</p><ul><li>Include it inside of your header element</li><li>or: Add it after the header element (but still in the <i>headerEl</i> variable) like shown in the code above.</li><li>or: Use the <i>wrapperEl</i> variable (make sure to adjust the CSS selector!) to get your element in the HTML file and add additional elements inside it.</li></ul><h4>Images</h4><p>Use <code>${nesting}</code> to output <code>.</code> or <code>..</code> or <code>../..</code> etc according to the current page's folder depth. This is helpful when you want to use relative paths to images. For Example:</p><pre><code>const headerEl = `&lt;img src="${nesting}/images/example.jpg" /&gt;`;</code></pre><p>... will output:</p><ul><li><code>&lt;img src="./images/example.jpg" /&gt;</code> on a page that isn't in any folder</li><li><code>&lt;img src="../images/example.jpg" /&gt;</code> on a page that is in a folder</li><li><code>&lt;img src="../../images/example.jpg" /&gt;</code> on a page that is in a sub-folder.</li><li>etc.</li></ul><h3 data-step="4">Prepare your pages</h3><p>Remove your header and footer from the html files of your pages - They will be added via JavaScript. Make sure all page content is in a wrapper, I suggest using <code>&lt;main&gt;</code> or <code>&lt;div&gt;</code>:</p><pre><code>&lt;body&gt;
  &lt;main&gt;
    your page here...
  &lt;/main&gt;
&lt;/body&gt;</code></pre><p>If you have page on which your layout should not be loaded, give the <code>&lt;body&gt;</code> element the "no-layout" class.</p><h3 data-step="5">Style</h3><p>You don't need to make any changes in the CSS.</p><p><b>Tip: </b>My code adds the class "active" to any links that are linked to the current page. This makes it easy to style active menu links. Just make a CSS rule that checks for the "active" class, e.g. <code>.active { font-weight:bold; }</code></p><br><blockquote class="success"><p><strong>And that's it!</strong></p></blockquote></section><section class="buy-me-a-coffee"><div><p>I spend <b>many hours</b> of my free time creating resources like these that I publish for free. If you'd like to say thanks, please share this resources with others and/or <b><a href="https://ko-fi.com/petrastipjar/goal?g=0" target="_blank">buy me a coffee (donate)</a></b>! <img aria-hidden="true" src="../assets/img/inline/laughing.gif"></p><p><small>This autumn I took in a stray cat that gave birth to 5 kittens in my apartment. As an unemployed uni student, the expenses (400+ eur in three months) have been rough for me. I appreciate ANY help, no matter how small!</small></p><p style="display:none"><small>If you have questions about this page feel free to contact me via my <a href="/about/guestbook">guestbook</a> or my <a href="https://neocities.org/site/petrapixel" target="_blank">neocities profile</a>. I promise I don't bite!</small></p></div><div><img src="../assets/img/layout/coffee.gif" alt="coffee" width="80"> <a href="../assets/img/cats/kitten (2).jpg" class="image"><img alt="" src="../assets/img/cats/kitten (2).jpg" width="260"></a></div></section><section><h2>Comments</h2><p><b>Leave your questions, problems, suggestions, requests and thanks here!</b></p><p>To share very long code or error messages with me, please upload it to <a href="https://pastebin.com/" target="_blank">pastebin</a> (or a similar site) and include the link. This is to make sure you don't hit the max character limit on comments.</p><div id="c_widget">Comment Widget could not be loaded!</div><script src="../assets/js/comment-widget.js"></script></section></main><footer><div class="footer-content"><a class="footer-rss" href="/rss.xml" target="_blank" aria-label="RSS Feed" title="RSS Feed"><img src="../assets/img/layout/rss.png" alt="RSS"></a><i>┊</i> created by petrapixel 2024 - <span>∞</span> <i>┊</i> <a href="https://neocities.org/site/petrapixel" target="_blank">my neocities profile</a> <span class="desktop-only"><i>┊</i> <a href="/sitemap">sitemap</a> <i>┊</i> <a href="https://github.com/petracoding/petrapixel.neocities.org" target="_blank">github</a></span> <i>┊</i> <a href="https://ko-fi.com/petrastipjar" target="_blank">tip jar</a></div><div class="footer-content mobile-only"><a id="clap-for-me" href="//clap.fc2.com/post/petrapixel/?url=https%3A%2F%2Fpetrapixel.neocities.org%2F&title=petrapixel" target="_blank"><img width="80" height="18" src="//clap.fc2.com/images/button/pink/petrapixel?url=https%3A%2F%2Fpetrapixel.neocities.org%2F&amp;lang=en" alt="clap for me on clap.fc2.com"> <small>click to clap for me!</small></a><br><center><small>Visitors:</small><script type="text/javascript" src="https://counter.websiteout.com/js/30/0/128970/0"></script></center><br><center><a href="#" tabindex="-1" style="font-size:1.5em">go to top</a></center></div></footer></div></body></html>